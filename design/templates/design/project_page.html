{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags wagtailembeds_tags %}

{% block body_class %}body--design{% endblock %}

{% block content %}
<main class="project">
    <section class="section-image project-image">
        {% image page.main_image fill-1600x608 %}
    </section>
    <section class="project-content">
        <header>
            <h1 class="article-title">{{ page.title }}</h1>
            <h2>{{ page.location }}</h2>
            <a class="link-back" href="{{ page.get_parent.url }}">Back</a>
        </header>
        <article>
            {{ page.description|richtext }}
        </article>
        <aside class="project-meta">
            {% if page.date %}
            <div class="project-meta-date">
                <h3>{{ page.date }}</h3>
            </div>
            {% endif %}
            {% if page.size %}
            <div class="project-meta-size">
                <h3>{{ page.size }}</h3>
            </div>
            {% endif %}
            {% if page.collaborators.all %}
            <div class="project-meta-collaborators">
                <h3>Collaborator{{ page.collaborators.count|pluralize }}:</h3>
                <ul>
                {% for collaborator in page.collaborators.all %}
                    <li>
                        {% if collaborator.url %}
                            <a href="{{ collaborator.url }}">
                        {% endif %}
                        {{ collaborator.name }}
                        {% if collaborator.url %}
                            </a>
                        {% endif %}
                    </li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% if page.clients.all %}
            <div class="project-meta-clients">
                <h3>Client{{ page.clients.count|pluralize }}:</h3>
                <ul>
                {% for client in page.clients.all %}
                    <li>
                        {% if client.url %}
                            <a href="{{ client.url }}">
                        {% endif %}
                        {{ client.name }}
                        {% if client.url %}
                            </a>
                        {% endif %}
                    </li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% if page.website or page.twitter or page.facebook or page.instagram %}
            <div class="project-meta-links">
                {% if page.website %}
                <a class="link-external" target="_blank" href="{{ page.website }}">
                    Project Website
                </a>
                {% endif %} 
                {% if page.twitter or page.facebook or page.instagram %}
                <ul class="social">
                    {% if page.twitter %}
                    <li class="social-twitter">
                        <a class="social-link" target="_blank" href="http://www.twitter.com/{{ settings.home.firminformation.twitter }}">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </li>
                    {% endif %} 
                    {% if page.facebook %}
                    <li class="social-facebook">
                        <a class="social-link" target="_blank" href="{{ settings.home.firminformation.facebook }}">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </li>
                    {% endif %} 
                    {% if page.instagram %}
                    <li class="social-instagram">
                        <a class="social-link" target="_blank" href="http://www.instagram.com/{{ settings.home.firminformation.instagram }}">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </li>
                    {% endif %} 
                </ul>
                {% endif %} 
            </div>
            {% endif %} 
        </aside>
    </section>
    <section class="section-slideshow project-slideshow">
        <div class="slideshow js-slideshow">
        {% for item in page.gallery_images.all %}
            <div>
                {% if item.video %}
                <div class="responsive-object">
                    {% embed item.video %}
                </div>
                {% else %}
                {% image item.image fill-1600x900 as img %}
                <img data-lazy="{{ img.url }}" />
                {% endif %}
            </div>
        {% endfor %}
        </div>
    </section>
</main>
{% endblock %}