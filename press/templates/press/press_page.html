{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}body--press{% endblock %}

{% block content %}
<main class="press">
    <section>
        <aside><h1 class="section-title">{{ page.title }}</h1></aside>
        <article>
            <h2 class="article-title">News</h2>
            {% for newsitem in newsitems %}
            <div class="newsitem">
                {% with newsitem=newsitem.specific %}
                    <h3>{{ newsitem.date|date:"M d, Y" }}</h3>
                    <h2>{{ newsitem.title }}</h2>
                    {{ newsitem.body }}
                {% endwith %}
            </div>
            {% empty %}
                <p>No entries found.</p>
            {% endfor %}
        </article>
        <aside>
            <h2 class="article-title">Publications</h2>
            <h2 class="article-title">Awards</h2>
                <div class="press-awards">
                {% for award in page.awards.all %}
                    {% ifchanged award.date|date:"Y" %}
                        <h3>{{ award.date|date:"Y" }}</h3>
                    {% endifchanged %}
                    <div class="press-award">
                    {% if award.url %}
                        <a href="{{ award.url }}" _target="blank">
                    {% endif %}
                    {{ award.name }}
                    {% if award.url %}
                        </a>
                    {% endif %}
                    <br />
                    </div>
                {% endfor %}
                </div>
        </aside>
    </section>
    <ul class="pagination">
      {% if newsitems.has_previous %}
        <li><a href="?page={{ newsitems.previous_page_number }}">Older<i class="fa fa-angle-left"></i></a></li>
      {% endif %}
      {% for page_num in newsitems.paginator.page_range %}
        <li {% if page_num == newsitems.number %}class="is-active"{% endif %}><a href="?page={{ page_num }}">{{ page_num }}</a></li>
      {% endfor %}
      {% if newsitems.has_next %}
        <li><a href="?page={{ newsitem.next_page_number }}">Newer<i class="fa fa-angle-right"></i></a></li>
      {% endif %}
    </ul>
</main>
{% endblock %}
