{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}body--press{% endblock %}

{% block content %}
<main class="press">
    <section>
        <aside><h1 class="section-title">{{ page.title }}</h1></aside>
        <article>
            <h2 class="article-title">News</h2>
            {% for newsitem in newsitems %}
            <div class="newsitem">
                {% with newsitem=newsitem.specific %}
                    <h3>{{ newsitem.date|date:"M d, Y" }}</h3>
                    <h2>{{ newsitem.title }}</h2>
                    {{ newsitem.body }}
                {% endwith %}
            </div>
            {% empty %}
                <p>No entries found.</p>
            {% endfor %}
        </article>
        <aside>
            {% if publications %}
            <div class="press-publications">
                <h2 class="article-title">Publications</h2>
                <ul class="link-list">
                {% for publication in publications|slice:":5" %}
                    <li><a href="{{ publication.specific.url }}">{{ publication.specific.title }}</a></li>
                {% endfor %}
                {% if publications.count > 5 %}
                    <li class="expander">
                        <input type="checkbox" id="expander-input" class="expander-input" />
                        <label for="expander-input" class="link-more expander-trigger"><span>More</span></label>
                        <ul class="expander-content link-list">
                            {% for publication in publications|slice:"5:" %}
                            <li><a href="{{ publication.specific.url }}">{{ publication.specific.title }}</a></li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endif %}
                </ul>
                
            </div>
            {% endif %}
            {% if page.awards %}
            <div class="press-awards">
                <h2 class="article-title">Awards</h2>
                {% for award in page.awards.all %}
                    {% ifchanged award.date|date:"Y" %}
                        <h3>{{ award.date|date:"Y" }}</h3>
                    {% endifchanged %}
                    <div class="press-award">
                    {% if award.url %}
                        <a href="{{ award.url }}" _target="blank">
                    {% endif %}
                    {{ award.name }}
                    {% if award.url %}
                        </a>
                    {% endif %}
                    <br />
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        </aside>
    </section>
    <ul class="pagination">
      {% if newsitems.has_next %}
        <li class="pagination-item"><a href="?page={{ newsitems.next_page_number }}"><i class="fa fa-angle-left"></i>&#160;Older</a></li>
      {% endif %}
      {% if newsitems.has_previous %}
        <li class="pagination-item"><a href="?page={{ newsitems.previous_page_number }}">Newer&#160;<i class="fa fa-angle-right"></i></a></li>
      {% endif %}
      <!--
      {% for page_num in newsitems.paginator.page_range %}
        <li {% if page_num == newsitems.number %}class="is-active"{% endif %}><a href="?page={{ page_num }}">{{ page_num }}</a></li>
      {% endfor %}-->
    </ul>
</main>
{% endblock %}
